@model List<Question>

@{
    ViewBag.Title = "Quiz";
    int x = 1;
    //var endTime = DateTime.UtcNow.AddSeconds(65);
    //var timeRemaining = TimeSpan.FromTicks(endTime.Ticks - DateTime.UtcNow.Ticks).TotalSeconds;



}

@{/*<script> //attempt3 for timer

                  var remSeconds = @timeRemaining;
                  var secondsCounter = remSeconds % 60;

                  function formatNumber(number) {
                      if (number < 10) return '0' + number;
                      else return '' + number;
                  }

                  function startTick() {
                      document.getElementById('secRemaining').innerText = formatNumber(secondsCounter);
                      document.getElementById('minRemaining').innerText = formatNumber(parseInt(remSeconds / 60));


                      var _tick = setInterval(function () {

                          if (remSeconds > 0) {

                              remSeconds = remSeconds - 1;
                              secondsCounter = secondsCounter - 1;

                              document.getElementById('secRemaining').innerText = formatNumber(secondsCounter);
                              document.getElementById('minRemaining').innerText = formatNumber(parseInt(remSeconds / 60));


                              if (secondsCounter == 0)
                                  secondsCounter = 60;
                          }
                          else {
                              alert('Your exam time has expired!');
                              clearInterval(_tick); //insert execute submit button here
                          }

                      }, 1000);
                  }
              </script>*/
}

@{/*countdown timer for attempt quiz attempt#1

          @section ScriptSection {
          <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
          <link rel="stylesheet" type="text/css" href="css/jquery.countdown.css">
          <script type="text/javascript" src="js/jquery.plugin.js"></script>
          <script type="text/javascript" src="js/jquery.countdown.js"></script>

          <script>
          $('#countdown-active').countdown({ until: liftoffTime, format: 'HM' });


          $('#shortly').countdown({
              until: shortly,
              onExpiry: liftOff, onTick: watchCountdown
          });

          $('#shortlyStart').click(function () {
              shortly = new Date();
              shortly.setSeconds(shortly.getSeconds() + 5.5);
              $('#shortly').countdown('option', { until: shortly });
          });

          function liftOff() {
              alert('Time is up!');
              $("#submitquiz").trigger("click");

          }

          function watchCountdown(periods) {
              $('#monitor').text('Just ' + periods[5] + ' minutes and ' +
                  periods[6] + ' seconds to go');
          }


          </script>
          }*/
}

@{ /* //attempt#2
       <head>
           <meta charset="utf-8" />
           <title>Countdown</title>

           <meta name="viewport" content="width=device-width, initial-scale=1" />
           <link rel="stylesheet" type="text/css" media="screen" href="~/css/bootstrap.css">
       </head>

       <body>
           @{/*<div class="countdown">
                           <h1>countdown</h1>
                           <div id="countdown-active"></div>
                       </div>

                   <script src="http://code.jquery.com/jquery-3.5.1.min.js"

                           integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
                           crossorigin="anonymous"></script>
                   <script src="~/js/jquery.countdown.min.js"></script>
           }

           <div id="getting-started"></div>


           <script src="~/js/jquery.js"></script>
           <script src="~/js/jquery.countdown.min.js"></script>
           <script src="~/js/main.js"></script>


           <script type="text/javascript">
               $('countdown-active').countdown('2022/04/01', function (event) {
                   $(this).html(event.strftime('%w weeks %d days %H:%M:%S'));
               });
           </script>






       </body>*/
}
@section ScriptSection {

    <script>
    $(document).ready(function () {


    });

    function timerEnd() {
        document.theForm.submit();
    }

    var totalMins = @ViewData["Timer"];

    var endTime = new Date().getTime() + (totalMins * 60000 + 1600);

    var y = setInterval(function () {
        var now = new Date().getTime(); //current timing
        var distance = endTime - now; //duration between now and the end time
        var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        var seconds = Math.floor((distance % (1000 * 60)) / 1000);
        if (hours == 0) {
            document.getElementById("Duration").innerHTML = minutes + "m " + seconds + "s ";
        }

        else {
            document.getElementById("Duration").innerHTML = hours + "h "
                + minutes + "m " + seconds + "s ";
        }

        // If the count down is over, write some text
        if (distance < 0) {
            clearInterval(y);
            timerEnd();
        }
    }, 1000);

    </script>
    }

    <div class="row">
        <div class="col-md-12">
            <div>Time Remaining : <span id="countdown" class="" value=@ViewData["Timer"]></span>:<span id="secRemaining"></span></div>

        </div>
    </div>

    <div class="row">

        <div class="col-6">

            <form asp-controller="Quiz" asp-action="Attempt" method="post" class="form-horizontal" role="form">
                <div class="form-horizontal">
                    <input type="hidden" id="QuizId" name="QuizId" value="@ViewData["quizid"]" />@ViewData["quizid"]

                    @foreach (var item in Model)
                    {
                        @if (item.SegmentNavigation.Name == "Grammar")
                        {
                            <p>
                                <span style="font-size:x-large;font-family:'Arial'"> Part I - GRAMMAR </span><br /><br />
                                For questions 1-10, choose the most suitable answer and shade on the Optical
                                Answer Sheet (OAS). (10 marks)<br /><br />

                            </p>

                            <div class="form-group" id="@("testdiv" +x)">
                                <p>
                                    Question @x: @item.Questions
                                </p>
                                <div class="col-12">
                                    <input type="radio" id="rdOption1" value="@item.FirstOption" name="@("Answer" +x)" /> @item.FirstOption
                                    <input type="radio" id="rdOption2" value="@item.SecondOption" name="@("Answer" +x)" /> @item.SecondOption
                                    <input type="radio" id="rdOption3" value="@item.ThirdOption" name="@("Answer" +x)" /> @item.ThirdOption
                                    <input type="radio" id="rdOption4" value="@item.FourthOption" name="@("Answer" +x)" /> @item.FourthOption
                                </div>



                            </div>
                            x++;
                            <br />
                        }



                        @if (item.SegmentNavigation.Name == "Vocabulary")
                        {
                            <p>
                                <span style="font-size:x-large;font-family:'Arial'"> Part II Vocabulary </span><br /><br />
                                For questions 11-20, choose the most suitable answer and shade on the Optical
                                Answer Sheet (OAS). (10 marks) <br /><br />

                            </p>
                            <div class="form-group" id="@("testdiv" +x)">
                                <p>
                                    Question @x: @item.Questions
                                </p>
                                <div class="col-12">
                                    <input type="radio" id="rdOption1" value="@item.FirstOption" name="@("Answer" +x)" /> @item.FirstOption
                                    <input type="radio" id="rdOption2" value="@item.SecondOption" name="@("Answer" +x)" /> @item.SecondOption
                                    <input type="radio" id="rdOption3" value="@item.ThirdOption" name="@("Answer" +x)" /> @item.ThirdOption
                                    <input type="radio" id="rdOption4" value="@item.FourthOption" name="@("Answer" +x)" /> @item.FourthOption
                                </div>



                            </div>
                            x++;
                            <br />
                        }






                        @if (item.SegmentNavigation.Name == "Paper1")
                        {

                            <div class="form-group" id="@("testdiv" +x)">
                                <p>
                                    Question @x: @item.Questions
                                </p>
                                <div class="col-12">
                                    <input type="radio" id="rdOption1" value="@item.FirstOption" name="@("Answer" +x)" /> @item.FirstOption
                                    <input type="radio" id="rdOption2" value="@item.SecondOption" name="@("Answer" +x)" /> @item.SecondOption
                                    <input type="radio" id="rdOption3" value="@item.ThirdOption" name="@("Answer" +x)" /> @item.ThirdOption
                                    <input type="radio" id="rdOption4" value="@item.FourthOption" name="@("Answer" +x)" /> @item.FourthOption
                                </div>



                            </div>
                            x++;
                            <br />
                        }


                    }
                </div>
                <div class="form-group row">
                    <div class="offset-sm-4 col-8">
                        <input type="submit" id="submitquiz" value="Submit" class="btn btn-primary" />
                    </div>
                </div>

            </form>
        </div>
    </div>